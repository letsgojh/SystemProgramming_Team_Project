# ChatFileSystem

<br>

## ğŸ“Œ í”„ë¡œì íŠ¸ ì†Œê°œ

ChatFileSystemì€ Linux í™˜ê²½ì—ì„œ C ì–¸ì–´ë¡œ êµ¬í˜„ëœ ë©€í‹°í´ë¼ì´ì–¸íŠ¸ ì±„íŒ… í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤.
TCP socket, select(), ncurses, íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ, DM(ê°œì¸ ë©”ì‹œì§€) ë“± ë„¤íŠ¸ì›Œí¬ í”„ë¡œê·¸ë˜ë° í•µì‹¬ ìš”ì†Œë¥¼ ëª¨ë‘ í¬í•¨í•©ë‹ˆë‹¤.

<br>

## ğŸ“Š ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
ChatFileSystem
â”œâ”€â”€ README.md
â”œâ”€â”€ client
â”‚   â”œâ”€â”€ client_chat.c
â”‚   â”œâ”€â”€ client_file.c
â”‚   â”œâ”€â”€ client_log.c
â”‚   â””â”€â”€ client_main.c
â”œâ”€â”€ common
â”‚   â”œâ”€â”€ encrypt.c
â”‚   â”œâ”€â”€ encrypt.h
â”‚   â””â”€â”€ protocol.h
â”œâ”€â”€ dummy.txt
â”œâ”€â”€ makefile
â”œâ”€â”€ server
â”‚   â”œâ”€â”€ server_auth.c
â”‚   â”œâ”€â”€ server_auth.h
â”‚   â”œâ”€â”€ server_chat.c
â”‚   â”œâ”€â”€ server_file.c
â”‚   â”œâ”€â”€ server_log.c
â”‚   â”œâ”€â”€ server_main.c
â”‚   â”œâ”€â”€ server_storage
â”‚   â”œâ”€â”€ server_user_list.c
â”‚   â””â”€â”€ server_user_list.h
â””â”€â”€ users.txt
```
<br>

## ğŸ§© êµ¬ì„± ìš”ì†Œ


### ğŸ“ server/

| íŒŒì¼ëª…                                         | ì„¤ëª…                               |
| ------------------------------------------- | -------------------------------- |
| `server_main.c`                             | ì„œë²„ ë©”ì¸. `select()` ê¸°ë°˜ ë©€í‹° í´ë¼ì´ì–¸íŠ¸ ì²˜ë¦¬ |
| `server_chat.c`                             | ì „ì²´ ì±„íŒ… broadcast, ê°œì¸ ë©”ì‹œì§€(DM) ì²˜ë¦¬   |
| `server_file.c`                             | íŒŒì¼ ì—…ë¡œë“œ / ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ ì²˜ë¦¬              |
| `server_log.c`                              | ì„œë²„ ì½˜ì†” ë¡œê·¸ ì¶œë ¥                      |
| `server_auth.c` / `server_auth.h`           | ë¡œê·¸ì¸ ê¸°ëŠ¥(ID/PW ê²€ì¦)                 |
| `server_user_list.c` / `server_user_list.h` | ì ‘ì† ìœ ì € ëª©ë¡ ê´€ë¦¬ ë° ì¶œë ¥                 |
| `server_storage/`                           | í´ë¼ì´ì–¸íŠ¸ê°€ ì—…ë¡œë“œí•œ ì‹¤ì œ íŒŒì¼ ì €ì¥ ë””ë ‰í† ë¦¬        |



### ğŸ“ client/

| íŒŒì¼ëª…             | ì„¤ëª…                                |
| --------------- | --------------------------------- |
| `client_main.c` | í´ë¼ì´ì–¸íŠ¸ ì‹¤í–‰ë¶€, ncurses UI ì´ˆê¸°í™” ë° ë©”ì¸ ë£¨í”„ |
| `client_chat.c` | ì±„íŒ… ë©”ì‹œì§€ ì†¡ìˆ˜ì‹  ë° í™”ë©´ ì¶œë ¥ ì²˜ë¦¬             |
| `client_file.c` | íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥                    |
| `client_log.c`  | í´ë¼ì´ì–¸íŠ¸ ë¡œê·¸ ê¸°ë¡(ì´ë²¤íŠ¸ ë¡œê¹…)               |



### ğŸ“ common/

| íŒŒì¼ëª…                       | ì„¤ëª…                              |
| ------------------------- | ------------------------------- |
| `protocol.h`              | ë©”ì‹œì§€ êµ¬ì¡°ì²´, ëª…ë ¹ íƒ€ì…, ë²„í¼ í¬ê¸° ë“± í”„ë¡œí† ì½œ ì •ì˜ |
| `encrypt.c` / `encrypt.h` | ê°„ë‹¨í•œ ì•”í˜¸í™”/ë³µí˜¸í™” ê¸°ëŠ¥ ì œê³µ               |


## ğŸš€ ê¸°ëŠ¥ ìš”ì•½

| ê¸°ëŠ¥        | ëª…ë ¹ì–´                | ì„¤ëª…                  |
| --------- | ------------------ | ------------------- |
| ë¡œê·¸ì¸ ê¸°ëŠ¥     | (ID/PW ì…ë ¥)        | ë¡œê·¸ì¸ ê¸°ëŠ¥     |
| ì „ì²´ ì±„íŒ…     | (ê¸°ë³¸ ë©”ì‹œì§€ ì…ë ¥)        | ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ë©”ì‹œì§€ ì „ì†¡     |
| ì»¤ë§¨ë“œ ë©”ë‰´ì–¼ ì¶œë ¥     | `/manual`        | ì‹¤í–‰ê°€ëŠ¥ ì»¤ë§¨ë“œ ë©”ë‰´ì–¼ ì¶œë ¥    |
| ê°œì¸ ë©”ì‹œì§€    | `/dm <user> msg`   | íŠ¹ì • ì‚¬ìš©ìì—ê²Œ 1:1 ë©”ì‹œì§€    |
| íŒŒì¼ ì—…ë¡œë“œ    | `/upload <file>`   | ì„œë²„ë¡œ íŒŒì¼ ì „ì†¡           |
| íŒŒì¼ ë‹¤ìš´ë¡œë“œ   | `/download <file>` | ì„œë²„ì—ì„œ íŒŒì¼ ë°›ì•„ì˜¤ê¸°        |
| ì ‘ì†ì ëª©ë¡ ì¡°íšŒ | `/list`            | í˜„ì¬ ì ‘ì† ì¤‘ì¸ ì‚¬ìš©ì í™•ì¸     |
| ë£¨íŠ¸ ê¶Œí•œ ì–‘ë„  | `/root <user>`     | ê´€ë¦¬ì ê¶Œí•œì„ ë‹¤ë¥¸ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬ |
| ìœ ì € ê°•í‡´     | `/kick <user>`     | ì§€ì • ì‚¬ìš©ì ì„œë²„ì—ì„œ ê°•ì œ ì¢…ë£Œ   |
| í™”ë©´ ìƒˆë¡œê³ ì¹¨   | `/refresh`         | í™”ë©´/ì…ë ¥ ë²„í¼ ì´ˆê¸°í™”        |
| client,server ë¡œê·¸ ê¸°ë¡ | (ìë™ ê¸°ë¡) | clientì™€ serverì˜ ë¡œê·¸ë¥¼ ê¸°ë¡í•˜ì—¬ client_log.txt,server_log.txtì— ê¸°ë¡|


## ğŸ‘¥ íŒ€ì› ì†Œê°œ ë° ì—­í• 

| ì´ë¦„ | ì—­í•  |
|------------|------|
| ìœ ì¬í™˜ | í´ë¼ì´ì–¸íŠ¸ UI, ì„œë²„ êµ¬ì¶•, ì±„íŒ…ê¸°ëŠ¥, /upload,/download,/dm, /list ì»¤ë§¨ë“œ, ì•”í˜¸í™”/ë³µí˜¸í™”, client,server log ê¸°ë¡ êµ¬í˜„|
| ìš°ìƒì˜ | ë°œí‘œ/PPT ì œì‘|
| ê¹€ì¬ë¯¼ | /refresh, /kick, /manual, /root ì»¤ë§¨ë“œ, íŒŒì¼ í­íŒŒ ê¸°ëŠ¥ êµ¬í˜„ |

## ğŸ›  ê°œë°œ í™˜ê²½

- OS: Ubuntu / WSL

- ì–¸ì–´: C

- ë¹Œë“œ ë„êµ¬: gcc

- ë¼ì´ë¸ŒëŸ¬ë¦¬: ncurses

- ë„¤íŠ¸ì›Œí¬: TCP Socket + select() ê¸°ë°˜ ë©€í‹°í”Œë ‰ì‹±

## ğŸ”§ ë¹Œë“œ & ì‹¤í–‰

### 1. Clone Repository

```bash
git clone git@github.com:letsgojh/SystemProgramming_Team_Project.git
```

### 2. Build

```bash
cd SystemProgramming_Team_Project
make clean
make
```

#### 3. execute Server

```bash
make run_server
```

#### 4. execute Client

```bash
make run_client
```

#### 5. input id and password into users.txt

- users.txtì— ë³¸ì¸ì˜ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê³µë°± ë‹¨ìœ„ë¡œ ì…ë ¥í•©ë‹ˆë‹¤. ex) qwer 1234 (ID : qwer, PW : 1234)


> âš ï¸ ì„œë²„ë¥¼ ë¨¼ì € ì‹¤í–‰í•œ í›„, í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.

> âš ï¸ **ì„œë²„ í¬íŠ¸ê°€ ì´ë¯¸ ì‚¬ìš© ì¤‘ì¼ ê²½ìš°**, ë‹¤ë¥¸ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.<br> ì˜ˆ: `9191`, `9123`, `1234` ë“±


## ğŸ”§ makefile ëª…ë ¹ì–´

| ëª…ë ¹ì–´	| ì„¤ëª…	| ì‚¬ìš©ë²• | 
|----------|------|--------|
| make | ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ë¥¼ ëª¨ë‘ ë¹Œë“œ (server_app, client_app ìƒì„±)	| make |
| make server_app |	ì„œë²„ í”„ë¡œê·¸ë¨ë§Œ ë¹Œë“œ	| make server_app |
| make client_app |	í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë¨ë§Œ ë¹Œë“œ |	make client_app |
| make clean	object | íŒŒì¼(.o), ì‹¤í–‰ íŒŒì¼, ì„ì‹œ txt íŒŒì¼ ì „ì²´ ì‚­ì œ	| make clean |
| make run_server |	ë¹Œë“œëœ ì„œë²„ ì‹¤í–‰ (./server_app)	| make run_server |
| make run_client |	ë¹Œë“œëœ í´ë¼ì´ì–¸íŠ¸ ì‹¤í–‰ (./client_app)	| make run_client |
| make rebuild |	clean í›„ ì „ì²´ ë‹¤ì‹œ ë¹Œë“œ	| make rebuild |


## ğŸ”Œ í†µì‹  í”„ë¡œí† ì½œ (protocol.h ê¸°ë°˜)

```bash
typedef struct {
    int type;                      // ë©”ì‹œì§€ íƒ€ì…
    char sender[MAX_NAME];         // ë³´ë‚´ëŠ” ì‚¬ëŒ (ID)
    char target[MAX_NAME];         // ë°›ëŠ” ì‚¬ëŒ
    char data[MAX_BUF];            // ë¬¸ìì—´, íŒŒì¼ ì²­í¬ ë“±
    int data_len;                  // íŒŒì¼ ì „ì†¡ ì‹œ ìœ íš¨ ë°”ì´íŠ¸ ìˆ˜
} Message;

```

### ğŸ”Œì£¼ìš” Type

| Type |	ì˜ë¯¸ |
|----------|------|
| MSG_LOGIN |	ë¡œê·¸ì¸ ìš”ì²­ |
| MSG_CHAT |	ì±„íŒ… ë©”ì‹œì§€ |
| MSG_DM |	ê°œì¸ ë©”ì‹œì§€ |
| MSG_UPLOAD |	íŒŒì¼ ì—…ë¡œë“œ |
| MSG_DOWNLOAD |	íŒŒì¼ ë‹¤ìš´ë¡œë“œ |
| MSG_LIST |	ì ‘ì†ì ëª©ë¡ |
| MSG_RESULT |	ì„œë²„ ì²˜ë¦¬ ê²°ê³¼ |